var ShadowDomSelector=function(e){"use strict";var n=function(){return n=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},n.apply(this,arguments)};function t(e,n,t,r){return new(t||(t=Promise))((function(o,u){function i(e){try{l(r.next(e))}catch(e){u(e)}}function c(e){try{l(r.throw(e))}catch(e){u(e)}}function l(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(i,c)}l((r=r.apply(e,n||[])).next())}))}function r(e,n){var t,r,o,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(l){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;i&&(i=0,c[0]&&(u=0)),u;)try{if(t=1,r&&(o=2&c[0]?r.return:c[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,c[1])).done)return o;switch(r=0,o&&(c=[2&c[0],o.value]),c[0]){case 0:case 1:o=c;break;case 4:return u.label++,{value:c[1],done:!1};case 5:u.label++,r=c[1],c=[0];continue;case 7:c=u.ops.pop(),u.trys.pop();continue;default:if(!(o=u.trys,(o=o.length>0&&o[o.length-1])||6!==c[0]&&2!==c[0])){u=0;continue}if(3===c[0]&&(!o||c[1]>o[0]&&c[1]<o[3])){u.label=c[1];break}if(6===c[0]&&u.label<o[1]){u.label=o[1],o=c;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(c);break}o[2]&&u.ops.pop(),u.trys.pop();continue}c=n.call(e,u)}catch(e){c=[6,e],r=0}finally{t=o=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([c,l])}}}"function"==typeof SuppressedError&&SuppressedError;var o="$",u=":host",i="invalid selector",c=10,l=10,a=function(e,n,t){var r;void 0===t&&(t={});var o=t.retries,u=void 0===o?10:o,i=t.delay,c=void 0===i?10:i,l=t.shouldReject,a=void 0===l||l,s=null!==(r=t.rejectMessage)&&void 0!==r?r:"Could not get the result after {{ retries }} retries";return new Promise((function(t,r){var o=0,i=function(){var l=e();n(l)?t(l):++o<u?setTimeout(i,c):a?r(new Error(s.replace(/\{\{\s*retries\s*\}\}/g,"".concat(u)))):t(l)};i()}))},s=function(e){var n,t=e[0],r=e[1];return(n=t)&&(n instanceof Document||n instanceof Element||n instanceof ShadowRoot)&&"string"==typeof r};function f(e,n){return function(e){return e.split(",").map((function(e){return e.trim()}))}(e).map((function(e){var t=function(e){return e.split(o).map((function(e){return e.trim()}))}(e);return n(t)}))}function d(e,n){var t=n?" If you want to select a shadowRoot, use ".concat(n," instead."):"";return"".concat(e," cannot be used with a selector ending in a shadowRoot (").concat(o,").").concat(t)}function h(e){return e instanceof Promise?e:Promise.resolve(e)}function y(){return"You can not select a shadowRoot (".concat(o,") of the document.")}function v(){return"You can not select a shadowRoot (".concat(o,") of a shadowRoot.")}function p(e,n){for(var t,r,o=null,i=e.length,c=0;c<i;c++){if(0===c)if(e[c].length)o=n.querySelector(e[c]);else{if(n instanceof Document)throw new SyntaxError(y());if(n instanceof ShadowRoot)throw new SyntaxError(v());o=(null===(t=n.shadowRoot)||void 0===t?void 0:t.querySelector(e[++c]))||null}else o=(null===(r=o.shadowRoot)||void 0===r?void 0:r.querySelector("".concat(u," ").concat(e[c])))||null;if(null===o)return null}return o}function m(e,n){var t,r=function(e,n,t){if(t||2===arguments.length)for(var r,o=0,u=n.length;o<u;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))}([],e,!0),o=r.pop();if(!r.length)return n.querySelectorAll(o);var i=p(r,n);return(null===(t=null==i?void 0:i.shadowRoot)||void 0===t?void 0:t.querySelectorAll("".concat(u," ").concat(o)))||null}function w(e,n){if(1===e.length&&!e[0].length){if(n instanceof Document)throw new SyntaxError(y());if(n instanceof ShadowRoot)throw new SyntaxError(v());return n.shadowRoot}var t=p(e,n);return(null==t?void 0:t.shadowRoot)||null}function g(e,n,t,r){void 0===t&&(t="querySelector"),void 0===r&&(r="shadowRootQuerySelector");for(var o=f(e,(function(e){if(!e[e.length-1].length)throw new SyntaxError(d(t,r));return e})),u=o.length,i=0;i<u;i++){var c=p(o[i],n);if(c)return c}return null}function S(e,n,t){void 0===t&&(t="querySelectorAll");for(var r=f(e,(function(e){if(!e[e.length-1].length)throw new SyntaxError(d(t));return e})),o=r.length,u=0;u<o;u++){var c=m(r[u],n);if(null==c?void 0:c.length)return c}return document.querySelectorAll(i)}function b(e,n,t,r){void 0===t&&(t="shadowRootQuerySelector"),void 0===r&&(r="querySelector");for(var u=f(e,(function(e){if(e.pop().length)throw new SyntaxError(function(e,n){return"".concat(e," must be used with a selector ending in a shadowRoot (").concat(o,"). If you don't want to select a shadowRoot, use ").concat(n," instead.")}(t,r));return e})),i=u.length,c=0;c<i;c++){var l=w(u[c],n);if(l)return l}return null}function R(e,n,o,u){return t(this,void 0,void 0,(function(){return r(this,(function(t){return[2,a((function(){return g(e,n,"asyncQuerySelector","asyncShadowRootQuerySelector")}),(function(e){return!!e}),{retries:o,delay:u,shouldReject:!1})]}))}))}function P(e,n,o,u){return t(this,void 0,void 0,(function(){return r(this,(function(t){return[2,a((function(){return S(e,n,"asyncQuerySelectorAll")}),(function(e){return!!e.length}),{retries:o,delay:u,shouldReject:!1})]}))}))}function _(e,n,o,u){return t(this,void 0,void 0,(function(){return r(this,(function(t){return[2,a((function(){return b(e,n,"asyncShadowRootQuerySelector","asyncQuerySelector")}),(function(e){return!!e}),{retries:o,delay:u,shouldReject:!1})]}))}))}var A=function(e,n){var t=e.querySelectorAll(n);if(t.length)return t;if(e instanceof Element&&e.shadowRoot){var r=A(e.shadowRoot,n);if(r.length)return r}for(var o=0,u=Array.from(e.querySelectorAll("*"));o<u.length;o++){var c=u[o],l=A(c,n);if(l.length)return l}return document.querySelectorAll(i)},q=function(e,n,t,r){return a((function(){return A(e,n)}),(function(e){return!!e.length}),{retries:t,delay:r,shouldReject:!1})};function Q(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t(this,void 0,void 0,(function(){var n,t,o,u,i;return r(this,(function(r){switch(r.label){case 0:return s(e)?(n=e[0],t=e[1],o=e[2],[4,P(t,n,(null==o?void 0:o.retries)||c,(null==o?void 0:o.delay)||l)]):[3,2];case 1:return[2,r.sent()];case 2:return u=e[0],i=e[1],[2,P(u,document,(null==i?void 0:i.retries)||c,(null==i?void 0:i.delay)||l)]}}))}))}function j(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t(this,void 0,void 0,(function(){var n,t,o,u,i;return r(this,(function(r){switch(r.label){case 0:return s(e)?(n=e[0],t=e[1],o=e[2],[4,_(t,n,(null==o?void 0:o.retries)||c,(null==o?void 0:o.delay)||l)]):[3,2];case 1:return[2,r.sent()];case 2:return u=e[0],i=e[1],[2,_(u,document,(null==i?void 0:i.retries)||c,(null==i?void 0:i.delay)||l)]}}))}))}var E=function(){function e(e,t){e instanceof Node||e instanceof Promise?(this._element=e,this._asyncParams=n({retries:c,delay:l},t||{})):(this._element=document,this._asyncParams=n({retries:c,delay:l},e||{}))}return Object.defineProperty(e.prototype,"element",{get:function(){return h(this._element).then((function(e){return e instanceof NodeList?e[0]||null:e}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"$",{get:function(){var n=this;return new e(h(this._element).then((function(e){return e instanceof Document||e instanceof ShadowRoot||null===e||e instanceof NodeList&&0===e.length?null:e instanceof NodeList?j(e[0],o,n._asyncParams):j(e,o,n._asyncParams)})),this._asyncParams)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"all",{get:function(){return h(this._element).then((function(e){return e instanceof NodeList?e:document.querySelectorAll(i)}))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"asyncParams",{get:function(){return this._asyncParams},enumerable:!1,configurable:!0}),e.prototype.eq=function(e){return t(this,void 0,void 0,(function(){return r(this,(function(n){return[2,h(this._element).then((function(n){return n instanceof NodeList&&n[e]||null}))]}))}))},e.prototype.query=function(n){var t=this;return new e(h(this._element).then((function(e){return null===e||e instanceof NodeList&&0===e.length?null:e instanceof NodeList?Q(e[0],n,t._asyncParams):Q(e,n,t._asyncParams)})),this._asyncParams)},e.prototype.deepQuery=function(n){var t=this;return new e(h(this._element).then((function(e){return null===e||e instanceof NodeList&&0===e.length?null:e instanceof NodeList?Promise.race(Array.from(e).map((function(e){return q(e,n,t._asyncParams.retries,t._asyncParams.delay)}))):q(e,n,t._asyncParams.retries,t._asyncParams.delay)})),this._asyncParams)},e}();return e.AsyncSelector=E,e.asyncDeepQuerySelector=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t(this,void 0,void 0,(function(){var n,t,o,u,i;return r(this,(function(r){switch(r.label){case 0:return s(e)?(n=e[0],t=e[1],o=e[2],[4,q(n,t,(null==o?void 0:o.retries)||c,(null==o?void 0:o.delay)||l)]):[3,2];case 1:case 3:return[2,r.sent()[0]||null];case 2:return u=e[0],i=e[1],[4,q(document,u,(null==i?void 0:i.retries)||c,(null==i?void 0:i.delay)||l)]}}))}))},e.asyncDeepQuerySelectorAll=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(s(e)){var t=e[0],r=e[1],o=e[2];return q(t,r,(null==o?void 0:o.retries)||c,(null==o?void 0:o.delay)||l)}var u=e[0],i=e[1];return q(document,u,(null==i?void 0:i.retries)||c,(null==i?void 0:i.delay)||l)},e.asyncQuerySelector=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t(this,void 0,void 0,(function(){var n,t,o,u,i;return r(this,(function(r){switch(r.label){case 0:return s(e)?(n=e[0],t=e[1],o=e[2],[4,R(t,n,(null==o?void 0:o.retries)||c,(null==o?void 0:o.delay)||l)]):[3,2];case 1:case 3:return[2,r.sent()];case 2:return u=e[0],i=e[1],[4,R(u,document,(null==i?void 0:i.retries)||c,(null==i?void 0:i.delay)||l)]}}))}))},e.asyncQuerySelectorAll=Q,e.asyncShadowRootQuerySelector=j,e.deepQuerySelector=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e[0],r=e[1];return"string"==typeof t?A(document,t)[0]||null:A(t,r)[0]||null},e.deepQuerySelectorAll=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e[0],r=e[1];return"string"==typeof t?A(document,t):A(t,r)},e.querySelector=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e[0],r=e[1];return"string"==typeof t?g(t,document):g(r,t)},e.querySelectorAll=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e[0],r=e[1];return"string"==typeof t?S(t,document):S(r,t)},e.shadowRootQuerySelector=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var t=e[0],r=e[1];return"string"==typeof t?b(t,document):b(r,t)},e}({});
